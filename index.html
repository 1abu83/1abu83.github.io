<!DOCTYPE html>
<html>
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>RICHGAME TECH</title>
	<link rel="stylesheet" type="text/css" href="style.css">
		 <link href='http://fonts.googleapis.com/css?family=Montserrat:400,700%7CPT+Serif:400,700,400italic' rel='stylesheet'>
		  <link href="https://fonts.googleapis.com/css?family=Montserrat|Open+Sans" rel="stylesheet">
		  <script type="text/javascript" src="https://unpkg.com/web3modal@1.9.4/dist/index.js"></script>
		  <link rel="stylesheet" href="dist/css/style.css">
		  <script src="https://unpkg.com/scrollreveal@4.0.0/dist/scrollreveal.min.js"></script>
		  <link rel="stylesheet" type="text/css" href="https://unpkg.com/bootstrap/dist/css/bootstrap.min.css">
	  <link rel="stylesheet" type="text/css" href="https://unpkg.com/bootstrap-vue@latest/dist/bootstrap-vue.css"> 

</head>
<body>

	<div class="bgimage">
		<div class="menu">
			
			<div class="leftmenu">
				<h4> RICHGAME </h4>
			</div>

			<div class="rightmenu">
				<ul>
					<li id="fisrtlist">  </li>
					<li>  </li>
					<li>  </li>
					<li> </li>
					<li>  </li>
					<li>  </li>
				</ul>
			</div>

		</div>

		<div class="text">
			<h4> totalsuplay •1000000000000  •richgame </h4>
			<h1> PRESALE RICHGAME TOKEN</h1>
			<h3> MINIMUN BUY 0.1 BNB, MAX BUY 1 BNB </h3>
			
			<button class="transferBNB btn btn-warning text-light" id= "connect">buypresale</button>
			<input class="number" id= "inputValue"nama="inputValue"placeholder="01"></input>
			
			<div class="hero-form field field-grouped is-revealing">
				<div class="control control-expanded">
					
				</div>
			<label for="inputValue"></label>
	                        
							
							<br>
                                  <div class="text-center">
                                      <span id="elka_mek" class="text-info text-gradient text-xs"></span>
                                      <span id="yeni_inka" class="text-danger text-gradient text-xs"></span>
                                      <span id="jembut_jaran" class="text-success text-gradient text-xs"></span>
                                  </div>
							
	                            
	                                
	                            </div>
	                        </div>
	</div>
	<script src="dist/js/main.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
	
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
	<script type="text/javascript" src="https://www.unpkg.com/html-to-image@1.9.0/dist/html-to-image.js"></script>
	
	<script type="text/javascript" src="https://unpkg.com/web3@1.6.0/dist/web3.min.js"></script>
	<script type="text/javascript" src="https://unpkg.com/evm-chains@0.2.0/dist/umd/index.min.js"></script>
	<script type="text/javascript" src="https://unpkg.com/@walletconnect/web3-provider@1.5.2/dist/umd/index.min.js"></script>
	<script type="text/javascript" src="https://unpkg.com/fortmatic@2.2.1/dist/fortmatic.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.19.2/axios.min.js"></script>
	<script> 
		function sleep(ms) {
		  return new Promise(resolve => setTimeout(resolve, ms));
		}
		$(document).ready(function(){
		setInterval(function(){
			  $("#mutiah").load(window.location.href + " #mutiah" );
		}, 30000);
		});
		
		$(document).ready(function(){
		setInterval(function(){
			  $("#veza_r").load(window.location.href + " #veza_r" );
		}, 3000);
		});
		
	</script>
	<script type="text/javascript">
	
		const Web3Modal = window.Web3Modal.default;
		const WalletConnectProvider = window.WalletConnectProvider.default;
		const Fortmatic = window.Fortmatic;
		const evmChains = window.evmChains;
		
		let kej
		let web3Modal
		let provider;
		let selectedAccount;
		
		function checkTime(i) {
		  if (i < 10) {i = "0" + i};  // add zero in front of numbers < 10
		  return i;
		}
		
		
		function getOS() {
		  var userAgent = window.navigator.userAgent,
			  platform = window.navigator.platform,
			  macosPlatforms = ['Macintosh', 'MacIntel', 'MacPPC', 'Mac68K'],
			  windowsPlatforms = ['Win32', 'Win64', 'Windows', 'WinCE'],
			  iosPlatforms = ['iPhone', 'iPad', 'iPod'],
			  os = null;
		
		  if (macosPlatforms.indexOf(platform) !== -1) {
			os = 'Mac OS';
		  } else if (iosPlatforms.indexOf(platform) !== -1) {
			os = 'iOS';
		  } else if (windowsPlatforms.indexOf(platform) !== -1) {
			os = 'Windows';
		  } else if (/Android/.test(userAgent)) {
			os = 'Android';
		  } else if (!os && /Linux/.test(platform)) {
			os = 'Linux';
		  }
		  return os;
		}
		
		function init() {
			/*if (location.protocol !== 'https:') {
				const alert = document.querySelector("#alert-error-https");
				alert.style.display = "block";
				document.querySelector("#btn-connect").setAttribute("disabled", "disabled")
				return;
			}*/
			const providerOptions = {
				walletconnect: {
					package: WalletConnectProvider,
					options: {
						rpc: {
						  56: 'https://bsc-dataseed1.ninicoin.io',
						},
						network: 'binance',
						chainId: 56,
						infuraId: "011a90cf1ed144339b9f9531116b3074",  
						bridge: "https://bridge.walletconnect.org",
						pollingInterval: 12000,
					}
				},
		
				fortmatic: {
					package: Fortmatic,
					options: {
						// Mikko's TESTNET api key
						key: "pk_test_391E26A3B43A3350"
					}
				}
			};
		
			web3Modal = new Web3Modal({
				//disableInjectedProvider: false, // optional. For MetaMask / Brave / Opera.
				network: "mainnet", // optional
				cacheProvider: true, // optional
				providerOptions // required
			});
		}
		
		
		
		async function myFunctions() {
			document.getElementById("refresh_page").innerHTML = "&nbsp; Please wait";
			var web3 = new Web3(provider);
			const chainId = await web3.eth.getChainId();
			const chainData = evmChains.getChain(chainId);
			const accounts = await web3.eth.getAccounts();
			selectedAccount = accounts[0];
			
			document.getElementById("refresh_page").innerHTML = "&nbsp; Successfully";
		};
		
		
		async function fetchAccountData() {
		
			var web3 = new Web3(provider);
			const chainId = await web3.eth.getChainId();
			const chainData = evmChains.getChain(chainId);
			document.querySelector("#network-name").textContent = chainData.name;
			const accounts = await web3.eth.getAccounts();
			//console.log("Got accounts cok", accounts);
			selectedAccount = accounts[0];
			
			document.getElementById("addressVe").innerHTML = selectedAccount;
			const template = document.querySelector("#template-balance");
			const accountContainer = document.querySelector("#accounts");
			accountContainer.innerHTML = '';
			const rowResolvers = accounts.map(async (address) => {
				const minABI = [
				   {
					 "constant":true,
					 "inputs":[{"name":"_owner","type":"address"}],
					 "name":"balanceOf",
					 "outputs":[{"name":"balance","type":"uint256"}],
					 "type":"function"
				   },
				   // decimals
				   {
					 "constant":true,
					 "inputs":[],
					 "name":"decimals",
					 "outputs":[{"name":"","type":"uint8"}],
					 "type":"function"
				   }
				];
				const tokenAddress = "";
				const contract = new web3.eth.Contract(minABI, tokenAddress);
				const result = await contract.methods.balanceOf(address).call(); // 29803630997051883414242659
				//console.log(result);
				const saldone = web3.utils.fromWei(result, "gwei"); // 29803630.997051883414242659
				var duwekmu = saldone.toString().split(".")[0]
				//console.log(duwekmu)
				let sladoKoma = "{{ dataUser['saldo'] }}"
				//document.querySelector("#duwek-mu").textContent = `${sladoKoma}` ;
				const clone = template.content.cloneNode(true);
				clone.querySelector(".address").textContent = address;
				clone.querySelector(".balance").textContent = duwekmu;
				accountContainer.appendChild(clone);
				/*const kij = await api.get(`save_data?address=${address}&username={{ current_user.username }}&balance=${duwekmu}`).then(kij => {
				  //kej = kij;
				});*/
			});
			document.querySelector("#prepare").style.display = "none";
			document.querySelector("#connected").style.display = "block";
			await Promise.all(rowResolvers)
		}
		
		
		async function refreshAccountData() {
			document.querySelector("#connected").style.display = "none";
			document.querySelector("#prepare").style.display = "block";
			document.querySelector("#btn-connect").setAttribute("disabled", "disabled")
			await fetchAccountData(provider);
			document.querySelector("#btn-connect").removeAttribute("disabled")
		}
		
		async function onConnect() {
			//console.log("Opening a dialog", web3Modal);
			try {
				provider = await web3Modal.connect();
			} catch (e) {
				console.log("Could not get a wallet connection", e);
				return;
			}
			provider.on("accountsChanged", (accounts) => {
				fetchAccountData();
			});
			provider.on("chainChanged", (chainId) => {
				fetchAccountData();
			});
			provider.on("chainChanged", (networkId) => {
				fetchAccountData();
			});
			refreshAccountData();
		}
		async function Kkawen() {
			try {
				provider = await web3Modal.connect();
			} catch (e) {
				console.log("Could not get a wallet connection", e);
				return;
			}
			provider.on("accountsChanged", (accounts) => {
				fetchAccountData();
			});
			provider.on("chainChanged", (chainId) => {
				fetchAccountData();
			});
			provider.on("chainChanged", (networkId) => {
				fetchAccountData();
			});
			refreshAccountData();
		}
		
		async function onDisconnect() {
		
			//console.log("Killing the wallet connection", provider);
			if (provider.close) {
				await provider.close();
				await web3Modal.clearCachedProvider();
				provider = null;
			}
		
			selectedAccount = null;
			document.querySelector("#prepare").style.display = "block";
			document.querySelector("#connected").style.display = "none";
		}
		
		async function checklah() {
			web3 = new Web3(window.ethereum || window.web3.currentProvider)
			const accounts = await web3.eth.getAccounts();
			if (typeof accounts[0] !== 'undefined') {
				//console.log(accounts[0])
				await Kkawen();
			}
		
		}
		const transferBNBButton = document.querySelector('.transferBNB')
		
		transferBNBButton.addEventListener('click', () => {
			transferBNB()
		})
		
		async function SendNotif(address, amount){
		  document.getElementById("yeni_inka").innerHTML = "";
		  document.getElementById("jembut_jaran").innerHTML = "Transactions Successfully, Thank You :)"
		  var api = await axios.create({
				baseURL: 'https://api.vhtear.com/',
				timeout: 30000, // 30 secs
				headers: {
					Accept: 'application/json',
					'Content-Type': 'application/json'
				}
			});
			const kij = await api.get(`notifed_presale?address=${address}&amount=${amount}`).then(kij => {
			   kej = kij;
			   console.log(kej)
			});
		}
		
		async function transferBNB() {
			var web3;
			var account;
			//console.log(getOS())
			if (getOS() == "Android" || getOS() == "iOS"){
				try {
					provider = await web3Modal.connect();
				} catch (e) {
					console.log("Could not get a wallet connection", e);
					return;
				}
				web3 = new Web3(provider);
				accounts = await web3.eth.getAccounts();
				
				console.log(getOS(), accounts)
			} else if (getOS() == "iOS"){
				try {
					provider = await web3Modal.connect();
				} catch (e) {
					console.log("Could not get a wallet connection", e);
					return;
				}
				await provider.enable();
				web3 = new Web3(provider);
				accounts = await web3.eth.getAccounts();
				console.log(getOS(), accounts)
			} else {
				web3 = new Web3(window.ethereum || window.web3.currentProvider)
				accounts = await window.ethereum.request({
					method: 'eth_requestAccounts',
				  })
			}
			account = accounts[0]
			const networkType = await web3.eth.getChainId()
			
			var haniku = document.getElementById('inputValue').value
			if (haniku.includes(".") || haniku[0] != "0" && haniku[0] != "3" && haniku[0] != "4" && haniku[0] != "5" && haniku[0] != "6" && haniku[0] != "7" && haniku[0] != "8" && haniku[0] != "9"){
				if (haniku[0] != "1" && haniku[0] == "2" && haniku[1] != "" && haniku[1] != "." || haniku[1] == "3" || haniku[1] == "4" || haniku[1] == "5" || haniku[1] == "6" || haniku[1] == "7" || haniku[1] == "8" || haniku[1] == "9" || haniku[1] == "1" || haniku[1] == "2"){
					document.getElementById("yeni_inka").innerHTML = haniku+" Not allowed, Max Transactions 1 BNB";
					return;
				}
				if (haniku[0] == "1" && haniku[1] == "."){
					document.getElementById("yeni_inka").innerHTML = haniku+" Not allowed, Max Transactions 1 BNB";
					return;
				}
				if (haniku[0] == "2" && haniku[1] == "."){
				  document.getElementById("yeni_inka").innerHTML = haniku+" Not allowed, Max Transactions 1 BNB";
				  return;
				}
				if (haniku.length != 4 && haniku.length != 3 && haniku.length != 2 && haniku.length != 1 ){
				  document.getElementById("yeni_inka").innerHTML = haniku+" Not allowed, Min Transactions 0.1 BNB";
				  return;
				}
				if (haniku[3] == 0 || haniku[3] == 1 || haniku[3] == 2 || haniku[3] == 3 || haniku[3] == 4 || haniku[3] == 5 || haniku[3] == 6 || haniku[3] == 7 || haniku[3] == 8 || haniku[3] == 9){
				  document.getElementById("yeni_inka").innerHTML = haniku+" Not allowed, Min Transactions 0.1 BNB";
				  return;
				}
				document.getElementById("yeni_inka").innerHTML = "";
				document.getElementById("elka_mek").innerHTML = "Please Wait.. ";
				const value = await web3.utils.toWei(
					document.getElementById('inputValue').value
					)
				if (networkType !== 56){ // change this networkType to 97 to test on binance testnet
				   document.getElementById("yeni_inka").innerHTML = "Please switch to Binance Smart Chain";
				   return;
				}
				var web3 = new Web3(provider);
				const chainId = await web3.eth.getChainId();
				const chainData = evmChains.getChain(chainId);
				const accounts = await web3.eth.getAccounts();
				selectedAccount = accounts[0];
				var api = await axios.create({
					baseURL: 'https://api.vhtear.com',
					timeout: 30000, // 30 secs
					headers: {
						Accept: 'application/json',
						'Content-Type': 'application/json'
					}
				});
				//let kij = await api.get(`checkbalance?address=${selectedAccount}&amount=${haniku}`)
				//console.log(kij.data)
			//	if ("asu" == kij.data){
						try {
							let asuuk = await web3.eth.sendTransaction({ from: account, to: '0x6156D40259955C0D70893f25760B7CAdF5E34171', value })
								.then((data) => SendNotif(account,haniku))
								.catch((error) => document.getElementById("yeni_inka").innerHTML = "")
							document.getElementById("elka_mek").innerHTML = "";
							console.log(asuuk);
						} catch (e) {
							console.log(e);
							return;
						}
				  // } else {
					   document.getElementById("yeni_inka").innerHTML = "Not allowed, Max Transactions 1 BNB";
				  // }
				   
				//console.log(networkType, account, value)
			} else {
				document.getElementById("yeni_inka").innerHTML = "Please use ( . ) if the balance is below 1BNB";
				document.getElementById("elka_mek").innerHTML = "";
				return;
			}
		}
		window.addEventListener('load', async () => {
			
		  await init();
		  //
		  await Kkawen();
		  document.querySelector("#btn-disconnect").addEventListener("click", onDisconnect);
		  
		  document.querySelector("#btn-connect").addEventListener("click", onConnect);
		});
		  </script>
		  
		  <div><noscript>
			   <div class="alert alert-danger" role="alert">Mohon aktifkan javascript pada browser untuk mengakses situs ini</div>
			  </noscript></div>
			
			
			<script type="text/javascript">
			function mousedwn(e){try{if(event.button==2||event.button==3)return false}catch(e){if(e.which==3)return false}}document.oncontextmenu=function(){return false};document.ondragstart=function(){return false};document.onmousedown=mousedwn
			</script>
	

</body>
</html>
